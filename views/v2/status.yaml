title: "Status"
path: "status"
subview: true
theme: subview
max_columns: 1
visible:
  - user: 0064d1649f1a456883e30898f976f2bf
  - user: feaa3f5113d84e1295d8ce4d96cbfac4

type: sections
sections:

  - type: grid
    cards:
      - type: vertical-stack
        cards:
          - type: custom:config-template-card
            entities:
              - sensor.powerwall_battery_now
              - sensor.powerwall_site_now
            card:
              type: custom:mini-graph-card
              name: "Powerwall"
              line_width: 3
              points_per_hour: 4
              decimals: 0
              hours_to_show: |-
                ${
                  var date = new Date();
                  var curHour = date.getHours() + date.getMinutes()/60.0;
                  curHour
                }
              entities:
                - entity: sensor.powerwall_charge_actual
                  show_graph: false
                - entity: sensor.powerwall_battery_now
                  aggregate_func: last
                  show_legend: false
                  name: "Powerwall"
                  color: green
                - entity: sensor.powerwall_site_now
                  aggregate_func: last
                  show_legend: false
                  name: "Grid"
                  color: orange
              show:
                graph: line
                points: hover
                labels: true

          - type: horizontal-stack
            cards:
              - type: statistic
                name: "Solar Generation"
                entity: sensor.powerwall_solar_export
                period:
                  calendar:
                    period: day
                stat_type: change
              - type: sensor
                name: "Now"
                entity: sensor.powerwall_solar_now

          - type: horizontal-stack
            cards:
              - type: statistic
                name: "Home Usage"
                entity: sensor.powerwall_load_import
                period:
                  calendar:
                    period: day
                stat_type: change

              - type: sensor
                name: "Now"
                entity: sensor.powerwall_load_now
          - type: horizontal-stack
            cards:
              - type: statistic
                name: "Grid Import"
                entity: sensor.powerwall_site_import
                period:
                  calendar:
                    period: day
                stat_type: change

              - type: statistic
                name: "Grid Export"
                entity: sensor.powerwall_site_export
                period:
                  calendar:
                    period: day
                stat_type: change
        grid_options:
          columns: full

      - type: vertical-stack
        cards:
          - type: entities
            title: "Batteries"
            entities:
              - type: divider

              - entity: sensor.ups_battery_charge
                name: "UPS"

              - type: divider

              - entity: sensor.mailbox_battery_level
                name: "Mailbox Sensor"
              - entity: sensor.garage_side_door_battery_level
                name: "Garage Side Door"
              - entity: sensor.garage_temp_battery
              - entity: sensor.outside_battery
                name: "Weather Station Battery"

          - type: markdown
            content: |
              There's more in <a href="./?disable_km">Advanced</a>
            text_only: true
            card_mod:
              style: |
                :host ha-card {
                  margin: 25px 0 0;
                  height: auto;
                  transition: none;
                }